<!DOCTYPE html><html data-pathToRoot="../"><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"></meta><title>Quick Start</title><link rel="shortcut icon" type="image/x-icon" href="../favicon.ico"></link><script type="text/javascript" src="../scripts/theme.js"></script><script type="text/javascript" src="../scripts/searchData.js" defer="true"></script><script type="text/javascript" src="../scripts/scastieConfiguration.js" defer="true"></script><link rel="stylesheet" href="../styles/theme/bundle.css"></link><link rel="stylesheet" href="../styles/theme/components/bundle.css"></link><link rel="stylesheet" href="../styles/theme/components/button/bundle.css"></link><link rel="stylesheet" href="../styles/theme/layout/bundle.css"></link><link rel="stylesheet" href="../styles/nord-light.css"></link><link rel="stylesheet" href="../styles/dotty-icons.css"></link><link rel="stylesheet" href="../styles/filter-bar.css"></link><link rel="stylesheet" href="../styles/code-snippets.css"></link><link rel="stylesheet" href="../styles/searchbar.css"></link><link rel="stylesheet" href="../styles/social-links.css"></link><link rel="stylesheet" href="../styles/versions-dropdown.css"></link><link rel="stylesheet" href="../styles/content-contributors.css"></link><link rel="stylesheet" href="../styles/fontawesome.css"></link><script type="text/javascript" src="../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../scripts/scaladoc-scalajs.js" defer="true"></script><script type="text/javascript" src="../scripts/contributors.js" defer="true"></script><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="https://scastie.scala-lang.org/embedded.js" defer="true"></script><script type="text/javascript" src="../scripts/data.js" defer="true"></script><link rel="stylesheet" href="../styles/staticsitestyles.css"></link><script>var pathToRoot = "../";</script><meta charset="utf-8"> 
<title>Hello, world!</title></head><body><div id=""><div id="header" class="body-small"><div class="header-container-left"><a href="../home.html" class="logo-container"><span class="project-name h300">otavia</span></a><span onclick="dropdownHandler(event)" class="text-button with-arrow" id="dropdown-trigger"><a><div class="projectVersion">0.3.2-SNAPSHOT</div></a></span><div id="version-dropdown" class="dropdown-menu"></div></div><div class="header-container-right"><button id="search-toggle" class="icon-button"></button><span id="theme-toggle" class="icon-button"></span><span id="mobile-menu-toggle" class="icon-button hamburger"></span></div></div><div id="mobile-menu"><div class="mobile-menu-header body-small"><span class="mobile-menu-logo"><span class="project-name h300">otavia</span></span><button id="mobile-menu-close" class="icon-button close"></button></div><div class="mobile-menu-container body-medium"><input id="mobile-scaladoc-searchbar-input" class="scaladoc-searchbar-input" type="search" placeholder="Find anything"></input><span id="mobile-theme-toggle" class="mobile-menu-item mode"></span></div></div><span id="mobile-sidebar-toggle" class="floating-button"></span><div id="leftColumn" class="body-small"><div class="switcher-container"><a id="docs-nav-button" class="switcher h100 selected" href="index.html">Docs</a><a id="api-nav-button" class="switcher h100 " href="../index.html">API</a></div><nav id="docs-nav" class="side-menu"><div class="ni n0 expanded"><span class="nh h100 selected de"><a href="#"><span>Quick Start</span></a></span></div><div class="ni n0 "><span class="nh de"><a href="core_concept.html"><span>Core Concept</span></a></span></div><div class="ni n0"><span class="nh de"><button class="ar icon-button "></button><a href="guide/index.html"><span>Guide</span></a></span><div class="ni n1 "><span class="nh de"><a href="guide/actor_model.html"><span>Actor Model</span></a></span></div><div class="ni n1 "><span class="nh de"><a href="guide/channel_pipeline.html"><span>Channel Pipeline</span></a></span></div><div class="ni n1 "><span class="nh de"><a href="guide/io_model.html"><span>IO Model</span></a></span></div><div class="ni n1 "><span class="nh de"><a href="guide/ioc.html"><span>Actor IOC </span></a></span></div><div class="ni n1 "><span class="nh de"><a href="guide/message_model.html"><span>Message Model</span></a></span></div><div class="ni n1 "><span class="nh de"><a href="guide/reactor_model.html"><span>Reactor Model</span></a></span></div><div class="ni n1 "><span class="nh de"><a href="guide/slf4a.html"><span>SLF4A</span></a></span></div><div class="ni n1 "><span class="nh de"><a href="guide/serde.html"><span>Serde framework</span></a></span></div></div><div class="ni n0"><span class="nh de"><button class="ar icon-button "></button><a href="module/index.html"><span>Modules</span></a></span><div class="ni n1 "><span class="nh de"><a href="module/buffer.html"><span>Buffer</span></a></span></div></div><div class="ni n0"><span class="nh de"><button class="ar icon-button "></button><a href="zh/index.html"><span>中文文档</span></a></span><div class="ni n1 "><span class="nh de"><a href="zh/quick_start.html"><span>快速开始</span></a></span></div><div class="ni n1 "><span class="nh de"><a href="zh/core_concept.html"><span>核心概念</span></a></span></div><div class="ni n1"><span class="nh de"><button class="ar icon-button "></button><a href="zh/guide/index.html"><span>Guide</span></a></span><div class="ni n2 "><span class="nh de"><a href="zh/guide/channel_pipeline.html"><span>Channel Pipeline</span></a></span></div><div class="ni n2 "><span class="nh de"><a href="zh/guide/io_model.html"><span>IO Model</span></a></span></div><div class="ni n2 "><span class="nh de"><a href="zh/guide/ioc.html"><span>Actor IOC </span></a></span></div><div class="ni n2 "><span class="nh de"><a href="zh/guide/message_model.html"><span>Message Model</span></a></span></div><div class="ni n2 "><span class="nh de"><a href="zh/guide/reactor_model.html"><span>Reactor Model</span></a></span></div><div class="ni n2 "><span class="nh de"><a href="zh/guide/slf4a.html"><span>SLF4A</span></a></span></div></div><div class="ni n1"><span class="nh de"><button class="ar icon-button "></button><a href="zh/module/index.html"><span>Modules</span></a></span><div class="ni n2 "><span class="nh de"><a href="zh/module/buffer.html"><span>Buffer</span></a></span></div></div></div><div class="ni n0"><span class="nh de"><button class="ar icon-button "></button><a href="blog/index.html"><span>Blog</span></a></span><div class="ni n1 "><span class="nh de"><a href="blog/2023/05/19/hello-world-blog.zh-cn.html"><span>你好世界</span></a></span></div><div class="ni n1 "><span class="nh de"><a href="blog/2023/05/19/hello-world-blog.html"><span>hello world blog</span></a></span></div></div></nav></div><div id="footer" class="body-small"><div class="left-container">Generated with</div><div class="right-container"><a href="https://github.com/otavia-projects/otavia"><button class="icon-button gh"></button></a><div class="text">Copyright (c) 2022, Yan Kun/Otavia Project</div></div><div class="text-mobile">Copyright (c) 2022, Yan Kun/Otavia Project</div></div><div id="scaladoc-searchBar"></div><div id="main"><div class="breadcrumbs container"><a href="index.html">otavia</a>/<a href="quick_start.html">Quick Start</a></div><div id="content" class="body-medium"><div><section id="environment-1"> 
 <h2 class="h500"><a href="#environment-1" class="anchor"></a>Environment</h2> 
 <p><img src="https://img.shields.io/badge/JDK-17%2B-blue" alt="Static Badge"> <img src="https://img.shields.io/badge/Scala-3.3%2B-blue" alt="Static Badge"></p> 
 <p>Although otavia mainly runs on the JVM platform, it currently only supports <code>Scala 3</code> in order to ensure reliable compile-time type safety, so if you're not familiar with <code>Scala 3</code> at the moment, you can learn about it with the following information.</p> 
 <ul> 
  <li>basic(enough for otavia): <a href="https://docs.scala-lang.org/scala3/book/introduction.html">Scala 3 Book</a></li> 
  <li>advance: <a href="https://docs.scala-lang.org/scala3/reference/">Scala 3 Language Reference</a></li> 
 </ul> 
 <p>The source code for all the following examples can be found at <a href="https://github.com/otavia-projects/otavia-examples">otavia-examples</a>.</p> 
</section> 
<section id="add-dependencies-1"> 
 <h2 class="h500"><a href="#add-dependencies-1" class="anchor"></a>Add dependencies</h2> 
 <p>If you use sbt, add the dependency:</p> 
 <div class="snippet mono-small-block" scala-snippet=""> 
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>libraryDependencies += "cc.otavia" %% "otavia-runtime" % "{version}"
</span><span line-number="2" class=""><span class="tooltip-container"></span>libraryDependencies += "cc.otavia" %% "otavia-codec" % "{version}"
</span></code></pre> 
  <div class="buttons"></div> 
 </div> 
 <p>If you use mill:</p> 
 <div class="snippet mono-small-block" scala-snippet=""> 
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>ivy"cc.otavia::otavia-runtime:{version}"
</span><span line-number="2" class=""><span class="tooltip-container"></span>ivy"cc.otavia::otavia-codec:{version}"
</span></code></pre> 
  <div class="buttons"></div> 
 </div> 
 <p>if maven:</p> 
 <div class="snippet mono-small-block"> 
  <pre><code class="language-text"><span line-number="1" class=""><span class="tooltip-container"></span>&lt;dependency&gt;
</span><span line-number="2" class=""><span class="tooltip-container"></span>    &lt;groupId&gt;cc.otavia&lt;/groupId&gt;
</span><span line-number="3" class=""><span class="tooltip-container"></span>    &lt;artifactId&gt;otavia-runtime&lt;/artifactId&gt;
</span><span line-number="4" class=""><span class="tooltip-container"></span>    &lt;version&gt;{version}&lt;/version&gt;
</span><span line-number="5" class=""><span class="tooltip-container"></span>&lt;/dependency&gt;
</span><span line-number="6" class=""><span class="tooltip-container"></span>&lt;dependency&gt;
</span><span line-number="7" class=""><span class="tooltip-container"></span>    &lt;groupId&gt;cc.otavia&lt;/groupId&gt;
</span><span line-number="8" class=""><span class="tooltip-container"></span>    &lt;artifactId&gt;otavia-codec&lt;/artifactId&gt;
</span><span line-number="9" class=""><span class="tooltip-container"></span>    &lt;version&gt;{version}&lt;/version&gt;
</span><span line-number="10" class=""><span class="tooltip-container"></span>&lt;/dependency&gt;
</span></code></pre> 
  <div class="buttons"></div> 
 </div> 
</section> 
<section id="simple-ping-pong-actors-1"> 
 <h2 class="h500"><a href="#simple-ping-pong-actors-1" class="anchor"></a>Simple Ping-Pong Actors</h2> 
 <p>This simple example defines two Actors: <code>PingActor</code> and <code>PongActor</code>. <code>PingActor</code> receives the <code>Start</code> message and sends a <code>Ping</code> message to the <code>PongActor</code>. Each <code>Ping</code> message sent must correspond to a <code>Pong</code> reply message.</p> 
</section> 
<section id="defining-messages-1"> 
 <h3 class="h400"><a href="#defining-messages-1" class="anchor"></a>Defining Messages</h3> 
 <p>According to the above description, we need three kinds of messages, each of which represents three different roles, which are also the three basic types of messages in <code>otavia</code>: <code>Start</code> is a <code>Notice</code> message, which is a kind of message in otavia that does not need to get a reply, as long as you have the address of the <code>Actor</code> in question, you can send the message to it. <code>Ping</code> is an <code>Ask</code> message, which must correspond to a <code>Reply</code> message, so if an Actor sends this message to another Actor, it means that it must receive a corresponding <code>Reply</code> message (kind of like a method parameter in a method definition); and <code>Pong</code> is a <code>Reply</code> message, which is kind of like a return value in a method definition.</p> 
 <p>The <code>Start</code> message is of type <code>Notice</code>, so it must inherit the <code>Notice</code> trait.</p> 
 <div class="snippet mono-small-block" scala-snippet=""> 
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>case class Start(sid: Int) extends Notice
</span></code></pre> 
  <div class="buttons"></div> 
 </div> 
 <p><code>Pong</code> must inherit the <code>Reply</code> trait, <code>Ping</code> is a message of type <code>Ask</code> and must inherit the <code>Ask</code> trait, the <code>Ask</code> trait carries a type constraint that describes the type of message for which a reply is expected for this <code>Ask</code> message.</p> 
 <div class="snippet mono-small-block" scala-snippet=""> 
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>case class Pong(pingId: Int) extends Reply
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>case class Ping(id: Int) extends Ask[Pong]
</span></code></pre> 
  <div class="buttons"></div> 
 </div> 
</section> 
<section id="implementing-the-actor-1"> 
 <h3 class="h400"><a href="#implementing-the-actor-1" class="anchor"></a>Implementing the actor</h3> 
 <p>Once we have our messages, let's define our Actor.</p> 
 <p>First let's determine the types of messages our <code>Actor</code> can receive, since <code>otavia</code> is a message-type-safe <code>Actor</code> programming framework, so let's determine the types of messages that each <code>Actor</code> can receive: <code>PingActor</code> receives <code>Start</code> and <code>Pong</code> messages, and <code>PongActor</code> receives <code>Ping</code> messages and replies to <code>Pong</code> messages. Since reply messages are constrained by <code>Ask</code> messages in <code>otavia</code>, there is no need to constrain such messages in the definition of <code>Actor</code>, and since <code>PingActor</code> needs to send a message to <code>PongActor</code>, <code>PingActor</code> needs to know the address of <code>PongActor</code>. Roughly, we can define the class name and generic parameters of our Actor as follows:</p> 
 <div class="snippet mono-small-block" scala-snippet=""> 
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>final class PongActor() extends StateActor[Ping] {
</span><span line-number="2" class=""><span class="tooltip-container"></span>  // ...
</span><span line-number="3" class=""><span class="tooltip-container"></span>}
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>final class PingActor(pongActorAddress: Address[Ping]) extends StateActor[Start] {
</span><span line-number="6" class=""><span class="tooltip-container"></span>  // ...
</span><span line-number="7" class=""><span class="tooltip-container"></span>}
</span></code></pre> 
  <div class="buttons"></div> 
 </div> 
 <p>Here comes <code>StateActor</code> which we can ignore for now, the final <code>Actor</code> in <code>otavia</code> must inherit either <code>StateActor</code> or <code>ChannelsActor</code>, <code>ChannelsActor</code> is the <code>Actor</code> that is used to deal with IO, and all the rest of the <code>Actor</code>s are <code>StateActor</code>.</p> 
 <p>Next, let's implement the specific message processing!</p> 
 <p>First, there is the <code>PingActor</code> , which needs to process the <code>Start</code> message, and during the process, it needs to send a <code>Ping</code> message, then wait for <code>Pong</code> to reply to the message, and then end the processing of the <code>Start</code> message.</p> 
 <div class="snippet mono-small-block" scala-snippet=""> 
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>final class PingActor(pongActorAddress: Address[Ping]) extends StateActor[Start] {
</span><span line-number="2" class=""><span class="tooltip-container"></span>  override def continueNotice(stack: NoticeStack[Start]): Option[StackState] = stack.state match {
</span><span line-number="3" class=""><span class="tooltip-container"></span>    case _: StartState =&gt;
</span><span line-number="4" class=""><span class="tooltip-container"></span>      println("PingActor handle Start message")
</span><span line-number="5" class=""><span class="tooltip-container"></span>      println("PingActor send Ping Message")
</span><span line-number="6" class=""><span class="tooltip-container"></span>      val state = FutureState(1)
</span><span line-number="7" class=""><span class="tooltip-container"></span>      pongActorAddress.ask(Ping(stack.notice.sid), state.future)
</span><span line-number="8" class=""><span class="tooltip-container"></span>      state.suspend()
</span><span line-number="9" class=""><span class="tooltip-container"></span>    case state: FutureState[Pong] if state.id == 1 =&gt;
</span><span line-number="10" class=""><span class="tooltip-container"></span>      val future = state.future
</span><span line-number="11" class=""><span class="tooltip-container"></span>      if (future.isSuccess) {
</span><span line-number="12" class=""><span class="tooltip-container"></span>        println(s"PingActor received ${future.getNow} message success!")
</span><span line-number="13" class=""><span class="tooltip-container"></span>        assert(future.getNow.pingId == stack.ask.sid)
</span><span line-number="14" class=""><span class="tooltip-container"></span>      }
</span><span line-number="15" class=""><span class="tooltip-container"></span>      stack.`return`()
</span><span line-number="16" class=""><span class="tooltip-container"></span>  }
</span><span line-number="17" class=""><span class="tooltip-container"></span>}
</span></code></pre> 
  <div class="buttons"></div> 
 </div> 
 <p><code>continueNotice</code> is the entry point for <code>Actor</code> to process a <code>Notice</code> message. <code>Notice</code> messages sent from elsewhere will be passed into <code>Actor</code> from this method, and we're going to implement <code>PongActor</code> next. <code>PongActor</code> receives <code>Ping</code> this kind of <code>Ask</code> message, and then replies with a <code>Pong</code> <code>Reply</code> message:</p> 
 <div class="snippet mono-small-block" scala-snippet=""> 
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>final class PongActor() extends StateActor[Ping] {
</span><span line-number="2" class=""><span class="tooltip-container"></span>  override def continueAsk(stack: AskStack[Ping]): Option[StackState] = {
</span><span line-number="3" class=""><span class="tooltip-container"></span>    println(s"PongActor received ${stack.ask} message")
</span><span line-number="4" class=""><span class="tooltip-container"></span>    println(s"PongActor reply ${stack.ask} with Pong message")
</span><span line-number="5" class=""><span class="tooltip-container"></span>    stack.`return`(Pong(stack.ask.id))
</span><span line-number="6" class=""><span class="tooltip-container"></span>  }
</span><span line-number="7" class=""><span class="tooltip-container"></span>}
</span></code></pre> 
  <div class="buttons"></div> 
 </div> 
 <p><code>continueAsk</code> is the entry point for <code>Actor</code> to process <code>Ask</code> messages, and <code>Ask</code> messages sent from elsewhere are passed into <code>Actor</code> from this method.</p> 
 <p>We can see that the method that handles the message <code>continueXXX</code> does not process the message directly, but loads the message into the <code>Stack</code>, the <code>Notice</code> message into the <code>NoticeStack</code>, and the <code>Ask</code> message into the <code>AskStack</code>. In <code>otavia</code>, the <code>Stack</code> data structure is introduced to facilitate the management of message dependencies and the sending of <code>Reply</code> messages; A <code>Future</code> is introduced to receive the return <code>Reply</code> message from an <code>Ask</code> message (note that the <code>Future</code> here is not the <code>Future</code> of the scala standard library); To wait for a <code>Future</code> to reach an executable state, a <code>StackState</code> is introduced. A <code>StackState</code> can be associated with one or more <code>Future</code>s, and a <code>Stack</code> can only be scheduled if the <code>resumable</code> method of the <code>StackState</code> is <code>ture</code>, or if all associated <code>Futures</code> have reached completion. The <code>continueXXX</code> method starts at a state and returns <code>Option[StackState]</code> at the end of each execution. The <code>return</code> method is used to terminate a <code>Stack</code>: in the case of an <code>AskStack</code>, the <code>return</code> method is used to send the return <code>Reply</code> message of the <code>Ask</code> message in the <code>AskStack</code>.</p> 
 <p><img src="../images/stack_resume.drawio.svg" alt=""></p> 
 <p>At this point, all the <code>Actors</code> and messages we need are fully implemented. Next, start an <code>ActorSystem</code> to run these <code>Actors</code>.</p> 
</section> 
<section id="running-the-actor-1"> 
 <h3 class="h400"><a href="#running-the-actor-1" class="anchor"></a>Running the actor</h3> 
 <div class="snippet mono-small-block" scala-snippet=""> 
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>@main def run(): Unit = {
</span><span line-number="2" class=""><span class="tooltip-container"></span>  val system = ActorSystem()
</span><span line-number="3" class=""><span class="tooltip-container"></span>  val pongActor = system.buildActor(() =&gt; new PongActor())
</span><span line-number="4" class=""><span class="tooltip-container"></span>  val pingActor = system.buildActor(() =&gt; new PingActor(pongActor))
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>  pingActor.notice(Start(88))
</span><span line-number="7" class=""><span class="tooltip-container"></span>}
</span></code></pre> 
  <div class="buttons"></div> 
 </div> 
 <p>With <code>ActorSystem()</code> we can easily create an <code>ActorSystem</code>, which is a runtime container for the actor in <code>otavia</code>. A JVM instance is only allowed to start one <code>ActorSystem</code> instance. The <code>buildActor</code> method of <code>ActorSystem</code> allows us to instantiate our defined actor. The <code>buildActor</code> method does not return the actor instance object itself, instead it returns an address to which we can send messages that the actor can handle.</p> 
 <p>Everything above is compile-time type-safe; if you send a message to the address returned by <code>buildActor</code> that the corresponding actor can't handle, it won't compile. If you use the AskStack<code>'s</code>return<code>method to return a</code> Reply<code>message that does not match the corresponding</code>Ask` message, this will also fail to compile.</p> 
</section> 
<section id="actor-that-receives-multiple-types-of-messages-1"> 
 <h2 class="h500"><a href="#actor-that-receives-multiple-types-of-messages-1" class="anchor"></a>Actor that receives multiple types of messages</h2> 
 <p>The above example demonstrates an actor that handles one type of message, but in real-world scenarios we often need to handle multiple types of messages in a single actor. This is very easy in <code>Scala 3</code>, and thanks to <code>Scala 3</code>'s powerful <code>Union Types</code> and <code>Intersection Types</code>, we can also make it compile-time type-safe to handle multiple messages.</p> 
 <p>Suppose we need to implement an actor that receives a <code>Hello</code> message and returns a <code>World</code> message, receives a <code>Ping</code> message and returns a <code>Pong</code> message, and receives an <code>Echo</code> message and returns no message.</p> 
 <p>The above requirement requires us to define the following kinds of messages:</p> 
 <div class="snippet mono-small-block" scala-snippet=""> 
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>case class Echo() extends Notice
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>case class World() extends Reply
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>case class Hello() extends Ask[World]
</span><span line-number="6" class=""><span class="tooltip-container"></span>
</span><span line-number="7" class=""><span class="tooltip-container"></span>case class Pong() extends Reply
</span><span line-number="8" class=""><span class="tooltip-container"></span>
</span><span line-number="9" class=""><span class="tooltip-container"></span>case class Ping() extends Ask[Pong]
</span></code></pre> 
  <div class="buttons"></div> 
 </div> 
 <p>Then we implement our actor:</p> 
 <div class="snippet mono-small-block" scala-snippet=""> 
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>final class MultiMsgActor() extends StateActor[Echo | Hello | Ping] {
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>  override def continueNotice(stack: NoticeStack[Echo]): Option[StackState] = {
</span><span line-number="4" class=""><span class="tooltip-container"></span>    println("MultiMsgActor received Echo message")
</span><span line-number="5" class=""><span class="tooltip-container"></span>    stack.`return`()
</span><span line-number="6" class=""><span class="tooltip-container"></span>  }
</span><span line-number="7" class=""><span class="tooltip-container"></span>
</span><span line-number="8" class=""><span class="tooltip-container"></span>  override def continueAsk(stack: AskStack[Hello | Ping]): Option[StackState] = {
</span><span line-number="9" class=""><span class="tooltip-container"></span>    stack match {
</span><span line-number="10" class=""><span class="tooltip-container"></span>      case stack: AskStack[Hello] if stack.ask.isInstanceOf[Hello] =&gt; handleHello(stack)
</span><span line-number="11" class=""><span class="tooltip-container"></span>      case stack: AskStack[Ping] if stack.ask.isInstanceOf[Ping] =&gt; handlePing(stack)
</span><span line-number="12" class=""><span class="tooltip-container"></span>    }
</span><span line-number="13" class=""><span class="tooltip-container"></span>  }
</span><span line-number="14" class=""><span class="tooltip-container"></span>
</span><span line-number="15" class=""><span class="tooltip-container"></span>  private def handleHello(stack: AskStack[Hello]): Option[StackState] = {
</span><span line-number="16" class=""><span class="tooltip-container"></span>    println("MultiMsgActor received Hello message")
</span><span line-number="17" class=""><span class="tooltip-container"></span>    stack.`return`(World())
</span><span line-number="18" class=""><span class="tooltip-container"></span>  }
</span><span line-number="19" class=""><span class="tooltip-container"></span>
</span><span line-number="20" class=""><span class="tooltip-container"></span>  private def handlePing(stack: AskStack[Ping]): Option[StackState] = {
</span><span line-number="21" class=""><span class="tooltip-container"></span>    println("MultiMsgActor received Ping message")
</span><span line-number="22" class=""><span class="tooltip-container"></span>    stack.`return`(Pong())
</span><span line-number="23" class=""><span class="tooltip-container"></span>  }
</span><span line-number="24" class=""><span class="tooltip-container"></span>}
</span></code></pre> 
  <div class="buttons"></div> 
 </div> 
</section> 
<section id="timer-3"> 
 <h2 class="h500"><a href="#timer-3" class="anchor"></a>Timer</h2> 
</section> 
<section id="lifecycle-of-actor-1"> 
 <h2 class="h500"><a href="#lifecycle-of-actor-1" class="anchor"></a>LifeCycle of Actor</h2> 
 <p>In <code>otavia</code>, users don't have to spend much time managing the life cycle of an actor. The actor instance is still managed by the JVM garbage collection, and as long as the actor has no address that references it, the actor instance will be automatically recycled by the JVM's garbage collection system.</p> 
 <p>There are several methods in Actor that can be called during different lifecycle processes</p> 
 <ul> 
  <li><code>afterMount</code>:</li> 
  <li><code>beforeRestart</code>:</li> 
  <li><code>restart</code>:</li> 
  <li><code>afterRestart</code>:</li> 
  <li><code>AutoCleanable.clean</code>:</li> 
 </ul> 
 <p><img src="../images/actor_life_cycle.drawio.svg" alt=""></p> 
</section></div><div id="toc" class="body-small"><div id="toc-container"><span class="toc-title h200">In this article</span><nav class="toc-nav"><ul class="toc-list"><li><a href="#environment-1">Environment</a></li><li><a href="#add-dependencies-1">Add dependencies</a></li><li><a href="#simple-ping-pong-actors-1">Simple Ping-Pong Actors</a><ul><li><a href="#defining-messages-1">Defining Messages</a></li><li><a href="#implementing-the-actor-1">Implementing the actor</a></li><li><a href="#running-the-actor-1">Running the actor</a></li></ul></li><li><a href="#actor-that-receives-multiple-types-of-messages-1">Actor that receives multiple types of messages</a></li><li><a href="#timer-3">Timer</a></li><li><a href="#lifecycle-of-actor-1">LifeCycle of Actor</a></li></ul></nav></div></div></div><div id="footer" class="body-small mobile-footer"><div class="left-container">Generated with</div><div class="right-container"><a href="https://github.com/lampepfl/dotty"><button class="icon-button gh"></button></a><a href="https://twitter.com/scala_lang"><button class="icon-button twitter"></button></a><a href="https://discord.com/invite/scala"><button class="icon-button discord"></button></a><a href="https://gitter.im/scala/scala"><button class="icon-button gitter"></button></a><div class="text">Copyright (c) 2022, Yan Kun/Otavia Project</div></div><div class="text-mobile">Copyright (c) 2022, Yan Kun/Otavia Project</div></div></div></div></body></html>